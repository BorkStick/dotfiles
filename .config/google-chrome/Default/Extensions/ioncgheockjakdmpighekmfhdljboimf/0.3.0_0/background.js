!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=63)}({0:function(e,t,s){"use strict";var n=class{get(e=null){return new Promise((t,s)=>{const n="string"==typeof e;chrome.storage[this.store].get(e,s=>{t(n?s[e]:s)})})}getBytesInUse(e=null){return new Promise((t,s)=>{chrome.storage[this.store].getBytesInUse(e,t)})}set(e){return new Promise((t,s)=>{chrome.storage[this.store].set(e,t)})}remove(e){return new Promise((t,s)=>{chrome.storage[this.store].remove(e,t)})}clear(){return new Promise((e,t)=>{chrome.storage[this.store].clear(e)})}listen(e,t){"function"==typeof e&&(t=e,e=null),chrome.storage.onChanged.addListener((s,n)=>{if(n===this.store)if(null!==e){if(s.hasOwnProperty(e)){const n=s[e].oldValue||null,r=s[e].newValue||null;t(n,r)}}else t(s)})}};new class extends n{constructor(){super(),this.store="local"}};const r=new class extends n{constructor(){super(),this.store="sync"}};new class{create(e=null,t){return"object"==typeof e&&(t=e,e=null),new Promise((s,n)=>{chrome.notifications.create(e,t,s)})}update(e,t){return new Promise((s,n)=>{chrome.notifications.update(e,t,s)})}clear(e){return new Promise((t,s)=>{chrome.notifications.clear(e,t)})}getAll(){return new Promise((e,t)=>{chrome.notifications.getAll(e)})}getPermissionLevel(){return new Promise((e,t)=>{chrome.notifications.getPermissionLevel(e)})}listen(e,t=null,s){if("function"==typeof t&&(s=t,t=null),"onPermissionLevelChanged"===e||"onShowSettings"===e)return this._nonNotificationIdListen(e,s);const n=null!==t?(e,...n)=>{t===e&&s(e,...n)}:s;chrome.notifications[e].addListener(n)}_nonNotificationIdListen(e,t){chrome.notifications[e].addListener(t)}};var i=s(2);t.a=new class extends i.EventEmitter{constructor(){super(),this._data=null,this.state="initiating",this._init()}async _init(){const e=await r.get();this._initListener(),this._data=e,this.state="ready",this.emit(this.state)}_initListener(){r.listen(e=>{Object.keys(e).forEach(t=>{e[t].hasOwnProperty("newValue")?this._data[t]=e[t].newValue:console.error("No newValue in sync storge change")}),this.emit("change",this.data,e)})}get data(){return this._data}set(e){return r.set(e)}has(e){return this.data.hasOwnProperty(e)}}},2:function(e,t){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,s,o,a,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(i(s=this._events[e]))return!1;if(n(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),s.apply(this,a)}else if(r(s))for(a=Array.prototype.slice.call(arguments,1),o=(l=s.slice()).length,h=0;h<o;h++)l[h].apply(this,a);return!0},s.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(o=i(this._maxListeners)?s.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var s=!1;function r(){this.removeListener(e,r),s||(s=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},s.prototype.removeListener=function(e,t){var s,i,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(s=this._events[e]).length,i=-1,s===t||n(s.listener)&&s.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(s)){for(a=o;a-- >0;)if(s[a]===t||s[a].listener&&s[a].listener===t){i=a;break}if(i<0)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(s=this._events[e]))this.removeListener(e,s);else if(s)for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},63:function(e,t,s){"use strict";s.r(t);var n=s(0),r=new class{constructor(){this._colors=["red","grey","purple"],this._sizes=["16","48","128"],this._path="./assets/icons/",this.paths={},this.onClickUrls={red:"https://gaming.youtube.com/",grey:chrome.extension.getURL("html/setup.html"),purple:"https://gaming.youtube.com/ice_poseidon/live/"},this._createPaths(),this._bindOnClick()}_filename(e,t){return`BetterYTG_${e}_${t}.png`}_createPaths(){this._colors.forEach(e=>{this.paths[e]={},this._sizes.forEach(t=>{this.paths[e][t]=this._path+this._filename(e,t)})})}_bindOnClick(){chrome.browserAction.onClicked.addListener(()=>{(e=>{const t=e.replace(/^(https|http)/i,"*");chrome.tabs.query({url:t},t=>{t&&t.length?chrome.tabs.update(t[0].id,{active:!0}):chrome.tabs.create({url:e})})})(this.onClickUrls[this.currentColor])})}set(e){this.currentColor=e,chrome.browserAction.setIcon({path:this.paths[e]})}setBadgeText(e){chrome.browserAction.setBadgeText({text:e})}setBadgeBackgroundColor(e){chrome.browserAction.setBadgeBackgroundColor({color:e})}},i={defaultOptions:{enableTwitchEmotes:!0,enableBetterYTGEmotes:!0,enableChatColors:!0,separateChatLines:!1,enableYoutubeGaming:!0,enableYoutubeVanilla:!0,enableYoutubeEmbed:!0,enableOldIceEmotes:!1},iceOptions:{enableOldIceEmotes:!0}},o=()=>new Promise((e,t)=>{if(n.a.data.setupComplete)return n.a.set({options:Object.assign({},i.defaultOptions,n.a.data.options)}),e();const s=(t,o)=>{if("setupComplete"===t.name){if(chrome.runtime.onMessage.removeListener(s),t.data.isPurpleArmy){const e=Object.assign({},n.a.data.options,i.iceOptions);n.a.set({options:e})}n.a.set({setupComplete:!0}),r.set("red"),e()}};r.set("grey"),chrome.tabs.create({url:"./html/setup.html"}),chrome.runtime.onMessage.addListener(s)});new class{constructor(){this.init=this.init.bind(this),n.a.on("ready",()=>{this.setupOptions(),o().then(this.init)})}init(){}setupOptions(){n.a.has("options")||n.a.set({options:i.defaultOptions})}}}});